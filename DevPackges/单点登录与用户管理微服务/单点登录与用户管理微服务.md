# 单点登录与用户管理微服务

## 领域驱动涉及核心——领域

### 领域事件

领域事件即领域中的方法，也就是充血模型中的行为。它是为业务服务的，而不是为数据库服务

> 注意
>
> 领域事件的执行必然伴随着领域对象状态的改变。如果只是判断领域中某个属性是否满足任一条件（比如，age是否大于18）的方法，那么该方法不属于领域事件，该领域若只有这样的方法也不能称为充血模型。

#### 意义

1. **解耦合**：领域事件可以让领域之间解耦，更加灵活的设计和修改领域
2. **交互规规范**：领域事件是领域模型之间进行交互的一种规范，使之间的交互更加清晰明确
3. **保持一致性**：领域事件可以保证不同领域之间的数据一致性
4. **支持异步**：领域事件可以支持异步处理，提高系统的并发能力，降低系统复杂性

#### 实际应用场景

1. **分布式事务**：当多个领域模型需要同时进行数据更新时，可以通过领域事件保证事务的一致性
2. **业务流程**：当领域、模型之间需要进行复杂的业务流程时，可以通过领域事件来规范执行过程
3. **实时分析**：当需要实时分析领域中的数据时，可以通过领域事件来捕获
4. **异步通信**：当需要实现异步通信时，可以通过领域事件及消息队列来实现领域模型指向的异步交互

## 聚合根

```bash
## 聚合根概念
1. 聚合根只是针对顶层对象
2. 跟他所依赖的实体形成一个有机的整体，可以被视为一个单独的单元进行管理和操作
3. 聚合根有一个唯一的标识，就是顶层对象的主键，可以根据该标识访问聚合根中的对象


## 聚合根设计要遵循的原则
1. 封装
2. 不变性
3. 聚合性
4. 一致性

## 使用ABPVnext去设计聚合根的优缺点
ABPVnext但凡操作了聚合根都是对数据库进行了连接操作和关联操作，极大的方便了我们对聚合根及DDD设计思想的使用和理解。但是，非常不利于并发相对较大的设计
```

