# 知识点

## 反射耗性能吗？

反射肯定是会消耗一定性能的，但耗性能的多少也要从两方面来说

1. 通过typeof或getType来反射消耗的性能是比较少的，因为在类中本身就存在Type属性
2. 通过Assembly操作程序集文件消耗的性能比较多，不建议大量使用

## 反射较多使用的场景

1. 程序启动时，因为程序只启动一次，消耗性能是无所谓
2. 使用typeof和getType反射

## 系统内存和系统性能的重要性

系统内存是比系统性能要重要的，不要为了那么一点系统性能去消耗系统内存

## 秒杀场景

秒杀分为强一致性和弱一致性

### 强一致性

秒杀肯定是多线程的，因为系统集群伴随着多线程，多线程就会出现异步。那么在多线程异步的情况下，确保数据的一致性就要涉及到锁，lock锁是涉及单体项目的，而秒杀要用的是分布式锁。分布式锁就可以在redis上去做。秒杀又存在高并发的特性，高并发在redis上可能也会有一定的压力，那么我们可以考虑把redis也做成集群，这样的话redis做秒杀的正常数据的往来，然后把每次的数据存到MQ中（RabbitMQ、kfk具体看业务的并发量大小），然后以异步的形式往数据库中存储

## 什么是聚合根

聚合根只是针对顶层对象，它跟它所依赖的实体形成一个有机的整体，可以被视为一个单独的单元进行管理和操作。聚合根有一个唯一的标识，就是顶层对象的Id，可以根据该标识访问聚合根中的对象。聚合根的设计要遵循封装、不变性、一致性和聚合性